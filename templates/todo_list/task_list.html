{% extends "base.html" %}

{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-4">
  <h1><b>TODO list</b></h1>
    <a href="{% url 'todo_list:task-create' %}" class="btn btn-primary link-to-page">
      <b>Add task</b>
    </a>
  </div>
  {% if task_list %}
  <ul class="list-unstyled">
    {% for task in task_list %}
      <li class="pb-3 mb-3 border-bottom">
        <div class="d-flex justify-content-between align-items-start">
          <div>
            <b>{{ task.content }}</b>
            {% if task.is_completed %}
              <span class="text-success"><b>Done</b></span>
            {% else %}
              <span class="text-danger"><b>Not done</b></span>
            {% endif %}
            <br>
            <small>Created: {{ task.created_at }}</small>
            {% if task.deadline %}
              <small style="color: #800000;" class="mb-1">Deadline: {{ task.deadline }}</small>
            {% endif %}
            {% if task.tags.all %}
              <br><small>Tags:</small>
              <small>
                {% for tag in task.tags.all %}
                  <span class="badge bg-secondary me-1">{{ tag.name }}</span>
                {% endfor %}
              </small>
            {% endif %}
                <a href="{% url 'todo_list:task-update' pk=task.pk %}"><b>Update</b></a>
                <a href="{% url 'todo_list:task-delete' pk=task.pk %}"><b>Delete</b></a>
          </div>
          <div>
            {% if task.is_completed %}
              <a href="{% url 'todo_list:toggle-complete-to-task' pk=task.pk %}" class="btn btn-secondary">
                <b>Undo</b>
              </a>
            {% else %}
              <a href="{% url 'todo_list:toggle-complete-to-task' pk=task.pk %}" class="btn btn-success">
                <b>Complete</b>
              </a>
            {% endif %}
          </div>
        </div>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>There are no tasks yet.</p>
{% endif %}
{% endblock %}
